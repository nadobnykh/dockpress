function wppfm_fillFeedList(){var a="";var b=jQuery("#wppfm-feed-list");wppfm_getFeedList(function(c){var d=JSON.parse(c);var e=d.list;var f=d.special_feed_add_ons_active;if("0"!==e){a=wppfm_feedListTable(e,f)}else{a=wppfm_emptyListTable()}b.empty();b.append(a);console.log("Feed List refreshed")})}function appendCategoryLists(d,e,a){var b=jQuery("#lvl_0");var c=jQuery("#category-selector-lvl");if(a){wppfm_getCategoryListsFromString(d,"",e,function(f){var g=JSON.parse(f)[0];if(g&&g.length>0){b.html(wppfm_categorySelectCntrl(g));b.prop("disabled",false)}else{c.html(wppfm_freeCategoryInputCntrl("default","0",false));c.prop("disabled",false)}})}}function wppfm_resetFeedList(){wppfm_fillFeedList()}function wppfm_resetFeedStatus(a){wppfm_checkNextFeedInQueue(function(b){wppfm_updateFeedRowStatus(a.product_feed_id,parseInt(a.status_id));wppfm_updateFeedRowData(a)})}function wppfm_feedListTable(g,j){var h="";for(var e=0;e<g.length;e++){var c=g[e]["status"];var b=g[e]["product_feed_id"];var f=g[e]["url"];var a="on_hold"===c||"ok"===c;var k="";var d=wppfm_list_status_text(c);if(a){k=g[e]["products"]}else{if("processing"===c){k=wppfm_feed_list_form_vars.processing_the_feed}else{if("failed_processing"===c||"in_processing_queue"===c){k=wppfm_feed_list_form_vars.unknown_text}}}h+='<tr id="feed-row"';if(e%2===0){h+=' class="alternate"'}h+=">";h+='<td id="title">'+g[e]["title"]+"</td>";h+='<td id="url">'+f+"</td>";h+='<td id="updated-'+b+'">'+g[e]["updated"]+"</td>";h+='<td id="products-'+b+'">'+k+"</td>";h+=j?'<td id="type-'+b+'">'+g[e]["feed_type_name"]+"</td>":"";h+='<td id="feed-status-'+b+'" value="'+c+'" style="color: '+g[e]["color"]+'"><strong>';h+=d;h+="</strong></td>";h+='<td id="actions-'+b+'">';if(a){h+=feedReadyActions(b,f,c,g[e]["title"],g[e]["feed_type_name"])}else{h+=feedNotReadyActions(b,f,g[e]["title"],g[e]["feed_type_name"])}h+="</td>"}return h}function feedReadyActions(a,e,d,j,i){var g="No feed generated"!==e;var c=e.lastIndexOf("/")>0?e.slice(e.lastIndexOf("/")-e.length+1):j;var f="ok"===d?wppfm_feed_list_form_vars.list_deactivate:wppfm_feed_list_form_vars.list_activate;var b=i.replace(/ /g,"-").toLowerCase();var h='<strong><a href="javascript:void(0);" onclick="parent.location=\'admin.php?page=wp-product-feed-manager&tab='+b+"&id="+a+"'\">"+wppfm_feed_list_form_vars.list_edit+" </a>";h+=g?' | <a href="javascript:void(0);" onclick="wppfm_viewFeed(\''+e+"')\">"+wppfm_feed_list_form_vars.list_view+"</a>":"";h+=' | <a href="javascript:void(0);" onclick="wppfm_deleteSpecificFeed('+a+", '"+c+"')\">"+wppfm_feed_list_form_vars.list_delete+"</a>";h+=g?'<a href="javascript:void(0);" onclick="wppfm_deactivateFeed('+a+')" id="feed-status-switch-'+a+'"> | '+f+"</a>":"";h+=' | <a href="javascript:void(0);" onclick="wppfm_duplicateFeed('+a+", '"+j+"')\">"+wppfm_feed_list_form_vars.list_duplicate+"</a>";h+=' | <a href="javascript:void(0);" onclick="wppfm_regenerateFeed('+a+')">'+wppfm_feed_list_form_vars.list_regenerate+"</a>";h+="</strong>";return h}function feedNotReadyActions(b,g,e,a){var f=g.lastIndexOf("/")>0?g.slice(g.lastIndexOf("/")-g.length+1):e;var c=a.replace(/ /g,"-").toLowerCase();var d="<strong>";d+='<a href="javascript:void(0);" onclick="parent.location=\'admin.php?page=wp-product-feed-manager&tab='+c+"&id="+b+"'\">"+wppfm_feed_list_form_vars.list_edit+"</a>";d+=' | <a href="javascript:void(0);" onclick="wppfm_deleteSpecificFeed('+b+", '"+f+"')\"> "+wppfm_feed_list_form_vars.list_delete+"</a>";d+=' | <a href="javascript:void(0);" onclick="wppfm_duplicateFeed('+b+", '"+e+"')\">"+wppfm_feed_list_form_vars.list_duplicate+"</a>";d+=' | <a href="javascript:void(0);" onclick="wppfm_regenerateFeed('+b+')">'+wppfm_feed_list_form_vars.list_regenerate+"</a>";d+="</strong>";d+=wppfm_addFeedStatusChecker(b);return d}function wppfm_emptyListTable(){var a="";a+="<tr>";a+="<td colspan = 4>"+wppfm_feed_list_form_vars.no_data_found+"</td>";a+="</tr>";return a}function wppfm_updateFeedRowData(c){if(c.status_id==="1"||c.status_id==="2"){var b=c.product_feed_id;var a=c.status_id==="1"?wppfm_feed_list_form_vars.ok:wppfm_feed_list_form_vars.other;jQuery("#updated-"+b).html(c.updated);jQuery("#products-"+b).html(c.products);jQuery("#actions-"+b).html(feedReadyActions(b,c.url,a,c.title,c.feed_type_name))}}function wppfm_list_status_text(a){switch(a){case"unknown":return wppfm_feed_list_form_vars.unknown;case"ok":return wppfm_feed_list_form_vars.status_ok;case"on_hold":return wppfm_feed_list_form_vars.on_hold;case"processing":return wppfm_feed_list_form_vars.processing;case"in_processing_queue":return wppfm_feed_list_form_vars.processing_queue;case"has_errors":return wppfm_feed_list_form_vars.has_errors;case"failed_processing":return wppfm_feed_list_form_vars.failed_processing}}function wppfm_updateFeedRowStatus(c,b){var a=jQuery("#feed-status-"+c);var e=jQuery("#feed-status-switch-"+c);var d=jQuery("#products-"+c);switch(b){case 0:a.html("<strong>"+wppfm_feed_list_form_vars.unknown+"</strong>");a.css("color","#6549F7");e.html("");break;case 1:a.html("<strong>"+wppfm_feed_list_form_vars.ok+"</strong>");a.css("color","#0073AA");e.html(wppfm_feed_list_form_vars.list_deactivate+" ");break;case 2:a.html("<strong>"+wppfm_feed_list_form_vars.on_hold+"</strong>");a.css("color","#0173AA");e.html(wppfm_feed_list_form_vars.list_activate+" ");break;case 3:a.html("<strong>"+wppfm_feed_list_form_vars.processing+"</strong>");a.css("color","#0000FF");e.html("");d.html(wppfm_feed_list_form_vars.processing_the_feed);break;case 4:a.html("<strong>"+wppfm_feed_list_form_vars.processing_queue+"</strong>");a.css("color","#00CCFF");e.html(wppfm_feed_list_form_vars.list_activate+" ");break;case 5:a.html("<strong>"+wppfm_feed_list_form_vars.has_errors+"</strong>");a.css("color","#FF0000");d.html(wppfm_feed_list_form_vars.unknown);e.html(wppfm_feed_list_form_vars.list_activate+" ");break;case 6:a.html("<strong>"+wppfm_feed_list_form_vars.processing_failed+"</strong>");a.css("color","#FF3300");d.html(wppfm_feed_list_form_vars.unknown);e.html("");break}}jQuery(document).ready(function(){});