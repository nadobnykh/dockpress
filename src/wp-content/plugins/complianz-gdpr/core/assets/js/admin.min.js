jQuery(document).ready(function(j){j(document).on("click",".cmplz-tablinks",function(){j(".cmplz-tablinks").removeClass("active");j(this).addClass("active");j(".cmplz-tabcontent").removeClass("active");j("#"+j(this).data("tab")).addClass("active");j("input[name=cmplz_active_tab]").val(j(this).data("tab"))});window.setTimeout(function(){j(".cmplz-hide").fadeTo(500,0).slideUp(500,function(){j(this).remove()})},2000);j(document).on("click",".cmplz-panel-toggle",function(){var r=j(this).closest(".cmplz-slide-panel").find(".cmplz-panel-content");var s=j(this).closest(".cmplz-slide-panel").find("i.toggle");if(r.is(":hidden")){s.removeClass("fa-caret-right");s.addClass("fa-caret-down");r.slideDown("fast")}else{r.slideUp("fast");s.removeClass("fa-caret-down");s.addClass("fa-caret-right")}});j(document).on("click",".cmplz-open-modal",function(v){v.preventDefault();var t=j(this).closest(".field-group");var u=t.find(".cmplz-field");var s=t.find(".cmplz-help-modal");j(".cmplz-field").each(function(){j(this).css("float","none");j(this).css("width","100%")});j(".cmplz-help-modal").each(function(){j(this).hide();j(this).parent().height(0)});u.css("float","left");u.css("width","60%");if(!t.hasClass("cmplz-settings")){var r=u.height();if(s.height()>r){r=s.height()}r+=20;s.parent().height(r)}s.fadeIn()});j(document).on("click",".cmplz-help-modal span",function(r){j(this).closest(".cmplz-help-modal").fadeOut()});j(".cmplz-color-picker").wpColorPicker({change:function(r,s){var t=j(r.target).data("hidden-input");j("#"+t).val(s.color.toString())}});j("#cmplz-support-form.hidden").hide().removeClass("hidden");j(document).on("click","#cmplz-support-link",function(s){s.preventDefault();var r=j("#cmplz-support-form");if(r.is(":visible")){r.slideUp()}else{r.slideDown()}});function d(){j(".multiple-field").each(function(){var s=true;j(this).find("input[type=text]").each(function(){if(j(this).val()===""){s=false}});j(this).find("textarea").each(function(){if(j(this).val()===""){s=false}});var r=j(this).closest(".cmplz-panel").find(".cmplz-multiple-field-validation i");if(s){r.removeClass("fa-times");r.addClass("fa-check")}else{r.addClass("fa-times");r.removeClass("fa-check")}})}d();j(document).on("keyup",".multiple-field input[type=text]",function(){d()});j(document).on("keyup",".multiple-field textarea",function(){d()});g();j(".cmplz-validate-multicheckbox .is-required:checkbox").change(g);function g(){j(".cmplz-validate-multicheckbox").each(function(u){var t=[];var r=true;j(this).find(":checkbox").each(function(v){t.push(j(this));if(j(this).is(":checked")){r=false}});var s=j(this).closest(".field-group").find(".cmplz-label");if(r){s.removeClass("valid-multicheckbox");s.addClass("invalid-multicheckbox");j.each(t,function(v,w){w.prop("required",true);w.addClass("is-required")})}else{s.removeClass("invalid-multicheckbox");s.addClass("valid-multicheckbox");j.each(t,function(v,w){w.prop("required",false);w.removeClass("is-required")})}});f()}p();j("input:radio").attr("required",true).click(p);function p(){j(".cmplz-validate-radio").each(function(u){var t=[];var r=true;j(this).find("input:radio").each(function(v){t.push(j(this));if(j(this).is(":checked")){r=false}});var s=j(this).closest(".field-group").find(".cmplz-label");if(r){s.removeClass("valid-radio");s.addClass("invalid-radio")}else{s.removeClass("invalid-radio");s.addClass("valid-radio")}});f()}f();j("input").change(function(r){f()});j("select").change(function(r){f()});j("textarea").change(function(r){f()});function f(){var r;var s=true;j(".condition-check").each(function(A){var w="cmplz_"+j(this).data("condition-question");var t="AND";if(w==undefined){return}var x=j(this).data("condition-answer");var v=j(this).find("input[type=checkbox]");if(!v.length){v=j(this).find("input")}if(!v.length){v=j(this).find("textarea")}if(!v.length){v=j(this).find("select")}if(v.length&&v[0].hasAttribute("required")){v.addClass("is-required")}x+="";if(x.indexOf("NOT ")!==-1){x=x.replace("NOT ","");s=false}else{s=true}var y=[];if(x.indexOf(" OR ")!==-1){y=x.split(" OR ");t="OR"}else{y=[x]}var u=j(this);var z=false;y.forEach(function(B){r=e(w);if(j("select[name="+w+"]").length){r=Array(j("select[name="+w+"]").val())}if(j("input[name='"+w+"["+B+"]']").length){if(j("input[name='"+w+"["+B+"]']").is(":checked")){z=true;r=[]}else{z=false;r=[]}}if(s){if(z||r.indexOf(B)!=-1||(r==B)){u.removeClass("hidden");if(v.hasClass("is-required")){v.prop("required",true)}if(t==="OR"){z=true}}else{u.addClass("hidden");if(v.hasClass("is-required")){v.prop("required",false)}if(t==="OR"){return}}}else{if(z||r.indexOf(B)!=-1||(r==B)){u.addClass("hidden");if(v.hasClass("is-required")){v.prop("required",false)}}else{u.removeClass("hidden");if(v.hasClass("is-required")){v.prop("required",true)}}}})})}function e(s){if(j("input[name^="+s+"]").attr("type")=="text"){return j("input[name^="+s+"]").val()}else{var r=[];j("input[name^="+s+"]:checked").each(function(){r[r.length]=j(this).val()});return r}}var q=10000;var a=complianz_admin.progress;var l=j(".cmplz-progress-bar");var m=j(".detected-cookies");var c;if(j("#cmplz-scan-progress").length){q=3000}function h(){var r=document.getElementById("cmplz_cookie_scan_frame");var s=r.contentDocument||r.contentWindow.document;if(!m.find(".cmplz-loader").length&&a<100){m.html('<div class="cmplz-loader"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');m.addClass("loader")}r.onload=function(){if(a>=100){return}j.get(complianz_admin.admin_url,{action:"cmplz_get_scan_progress"},function(t){var v;if(t){v=jQuery.parseJSON(t);a=parseInt(v.progress);var u=v.next_page;if(a>=100){a=100;l.css({width:a+"%"});j.ajax({type:"GET",url:complianz_admin.admin_url,dataType:"json",data:({action:"load_detected_cookies"}),success:function(w){if(w.success){j(".detected-cookies").html(w.cookies);j(".detected-cookies.loader").removeClass("loader")}}})}else{l.css({width:a+"%"});j("#cmplz_cookie_scan_frame").attr("src",u);window.setTimeout(h,q)}}});return};window.setTimeout(h,q)}if(j("#cmplz_cookie_scan_frame").length){h()}l.css({width:a+"%"});j(document).on("click",".cmplz-add-to-policy",function(){var t=j(this).closest(".cmplz-slide-panel").find(".cmplz-title").html();var s=j(this).closest(".cmplz-slide-panel").find(".cmplz-panel-content").html();var r=o("cmplz_custom_privacy_policy_text");n(r+"<h3>"+t+"</h3>"+s,"cmplz_custom_privacy_policy_text");j(this).remove()});function o(r,s){if(typeof r=="undefined"){r=wpActiveEditor}if(typeof s=="undefined"){s=r}if(jQuery("#wp-"+r+"-wrap").hasClass("tmce-active")&&tinyMCE.get(r)){return tinyMCE.get(r).getContent()}else{return jQuery("#"+s).val()}}function n(r,s,t){if(typeof s=="undefined"){s=wpActiveEditor}if(typeof t=="undefined"){t=s}if(jQuery("#wp-"+s+"-wrap").hasClass("tmce-active")&&tinyMCE.get(s)){return tinyMCE.get(s).setContent(r)}else{return jQuery("#"+t).val(r)}}function b(r,s){if(typeof r=="undefined"){r=wpActiveEditor}if(typeof s=="undefined"){s=r}if(jQuery("#wp-"+r+"-wrap").hasClass("tmce-active")&&tinyMCE.get(r)){return tinyMCE.get(r).focus()}else{return jQuery("#"+s).focus()}}var i="#bar_pct_all_container";j(i).show();j(document).on("change","select[name=cmplz_region]",function(){j(i).hide();var s=j("select[name=cmplz_region]").val();var r=j("select[name=stats_type]").val();i="#bar_"+r+"_"+s+"_container";j(i).fadeIn()});j(document).on("change","select[name=stats_type]",function(){j(i).hide();var s="eu";if(j("select[name=cmplz_region]").length){s=j("select[name=cmplz_region]").val()}var r=j("select[name=stats_type]").val();i="#bar_"+r+"_"+s+"_container";j(i).fadeIn()});j(document).on("click","#cmplz-report-unknown-cookies",function(){j.ajax({type:"POST",url:complianz_admin.admin_url,dataType:"json",data:({action:"cmplz_report_unknown_cookies"}),success:function(r){console.log(r);if(r.success){j("#cmplz-report-unknown-cookies").hide();j("#cmplz-report-confirmation").show()}}})});function k(){if(j("#cmplz_anonymous_window_warning").length){var r=window.RequestFileSystem||window.webkitRequestFileSystem;if(!r){return}r(window.TEMPORARY,100,function(s){},function(s){j("#cmplz_anonymous_window_warning").show()})}if(j("#cmplz_adblock_warning").length){if(window.canRunAds===undefined){j("#cmplz_adblock_warning").show()}}}k()});